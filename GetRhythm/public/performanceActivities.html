<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	
	<!-- Tone.js CDN -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.26/Tone.js" integrity="sha512-+esjJ8NSEfoB5Sr8R7jTcYxCR1Bd6q9C+WQC0JA2UXVPT8Mlo/TJqqyp0qeeoxFzkAaa8t6tZCHLGmw3oNI2Qg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	
	
	<link rel="stylesheet" href="myStyles.css">
	
	<title>Performance Activities</title>
	
</head>
<body>
	
	<h1 class="display-4 text-center">Performance Activity</h1>
	
	<!-- Rhythm Pattern 1 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 1 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm1" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 1</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div class="row p-5  d-flex align-items-center ">
			<div class="col-4 mx-auto note1 invisible"><p class="display-5 text-center "><span class="note1 invisible notation">q</span> <span class="note2 invisible notation">q</span></p></div>
			<div class="d-grid gap-2 col-4 rhythmRow1 invisible ">
			<div id="square1" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center note1 invisible"><span class="note1 invisible">ta</span> <span class="note2 invisible">ta</span></p></div>
	
		</div>
	</div>
	
	<h1>Contents of loopTime: <span id="loopTimeSpan"></span></h1>
<!-- 	Javascript for Rhythm 1 -->	
		<script>
	
		// Create synth
		const synth = new Tone.MembraneSynth().toDestination();
		var tempo = 80;
		
	 	// Rhythm Patter 1 Implementation
		var noteCounter = 1;	
	 	// Part describes sound pattern to be played and includes visual sync
		const part1 = new Tone.Part(function(time, pitch){
		synth.triggerAttackRelease(pitch, "8n", time); // play an 8th note at the pitch and time passed in
		const loopTime = Tone.Time(part1.loopEnd).toMilliseconds()-(600000/(tempo*8));
	    document.getElementById("loopTimeSpan").innerHTML = loopTime;
	    
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementsByClassName("note"+noteCounter);
/* 					const beat2 = document.getElementsByClassName("beat2");
 */					const circle = document.getElementById("square1");
					
					// 1st Beat Animation
					for(var i = 0; i < noteElement.length; i++)
					{
						noteElement[i].classList.remove("invisible");
						noteElement[i].classList.add("visible");
					}
					
					if (noteCounter < part1.length){
						noteCounter += 1;
					}
					else {
						noteCounter = 1;
						
						
					    setTimeout(() => {
							for (var i = 1; i <= noteElement.length; i++){
								const noteOff = document.getElementsByClassName("note"+i);
								for(var j = 0; j < noteOff.length; j++)
								{
									noteOff[j].classList.remove("visible");
									noteOff[j].classList.add("invisible");
								}
							}			
						},loopTime ); 	
					}
					
					// Circle Animation
					circle.classList.add("visible");
					circle.classList.remove("invisible");
					
					setTimeout(() => {
						circle.classList.add("invisible");
						circle.classList.remove("visible");
					}, loopTime);
				}, time, noteCounter);
				

			
		}, [["0", "C2"], ["0:1", "C2"]]); // pitch and time of rhythm pattern notes
		//set the pattern to loop every 2 beats
 		part1.set({
			"loop" : true,
			"loopEnd" : "2n"
			
		}); 
		
		// HTML Sound On/Off Button
	 	let playing1 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm1 button
	  	document.querySelector("#rhythm1").addEventListener("click", function() {  	
			
	  		
	  		if (!playing1) {
	  			part1.start(0);

	 			Tone.start();
	 			Tone.Transport.start(("+0.1"));
	  			playing1 = true;
	  			Tone.Transport.bpm.value = tempo;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part1.stop();
	  			playing1 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 1 Implementation -->
	
	
	<!-- Rhythm Pattern 2 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 2 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm2" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 2</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div id= "rhythmRow2" class="row p-5 invisible d-flex align-items-center">
			<div class="col-4 mx-auto "><p class="display-5 text-center notation">q n</p></div>
			<div class="d-grid gap-2 col-4 ">
			<div id="square2" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center">ta ti-ti</p></div>
	
		</div>
	</div>
	
<!-- 	Javascript for Rhythm 2 -->	
		<script>
	
		// Create synth
		const synth2 = new Tone.MembraneSynth().toDestination();
		
	 	// Rhythm Patter 2 Implementation

	 	// Part describes sound pattern to be played and includes visual sync
		const part2 = new Tone.Part(function(time, pitch){
		synth2.triggerAttackRelease(pitch, "8n", time); // play an 8th note at the pitch and time passed in
		
		
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementById("rhythmRow2");
					noteElement.classList.remove("invisible");
					noteElement.classList.add("visible");
					setTimeout(() => {
						noteElement.classList.remove("visible");
						noteElement.classList.add("invisible");
					}, 150);
				}, time);

			
		}, [["0", "C2"], ["4n", "C2"], ["4n.", "C2"]]); // pitch and time of rhythm pattern notes
		
		//set the pattern to loop every half measure
		part2.set({
			"loop" : true,
			"loopEnd" : "2n"
		});
		
		// HTML Sound On/Off Button
	 	let playing2 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm2 button
	  	document.querySelector("#rhythm2").addEventListener("click", function() {  	
			if (!playing2) {
				part2.start(0);
	 			Tone.start();
	 			Tone.Transport.start(("+0.1"));
	  			playing2 = true;
	  			Tone.Transport.bpm.value = 80;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part2.stop();
	  			playing2 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 2 Implementation -->
	
	<!-- Rhythm Pattern 3 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 3 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm3" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 3</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div id= "rhythmRow3" class="row p-5 invisible d-flex align-items-center">
			<div class="col-4 mx-auto "><p class="display-5 text-center notation">n q</p></div>
			<div class="d-grid gap-2 col-4 ">
			<div id="square2" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center">ti-ti ta</p></div>
	
		</div>
	</div>
	
<!-- 	Javascript for Rhythm 3 -->	
		<script>
	
		// Create synth
		const synth3 = new Tone.MembraneSynth().toDestination();
		
	 	// Rhythm Patter 3 Implementation

	 	// Part describes sound pattern to be played and includes visual sync
		const part3 = new Tone.Part(function(time, pitch){
		synth3.triggerAttackRelease(pitch, "8n", time); // play an 8th note at the pitch and time passed in
		
		
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementById("rhythmRow3");
					noteElement.classList.remove("invisible");
					noteElement.classList.add("visible");
					setTimeout(() => {
						noteElement.classList.remove("visible");
						noteElement.classList.add("invisible");
					}, 150);
				}, time);

			
		}, [["0", "C2"], ["8n", "C2"], ["4n", "C2"]]); // pitch and time of rhythm pattern notes
		
		//set the pattern to loop every half measure
		part3.set({
			"loop" : true,
			"loopEnd" : "2n"
		});
		
		// HTML Sound On/Off Button
	 	let playing3 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm3 button
	  	document.querySelector("#rhythm3").addEventListener("click", function() {  	
			if (!playing3) {
				part3.start(0);
	 			Tone.start();
	 			Tone.Transport.start(("+0.1"));
	  			playing3 = true;
	  			Tone.Transport.bpm.value = 80;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part3.stop();
	  			playing3 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 3 Implementation -->
	
	<!-- Rhythm Pattern 4 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 4 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm4" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 4</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div id= "rhythmRow4" class="row p-5 invisible d-flex align-items-center">
			<div class="col-4 mx-auto "><p class="display-5 text-center notation">n n</p></div>
			<div class="d-grid gap-2 col-4 ">
			<div id="square2" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center">ti-ti ti-ti</p></div>
	
		</div>
	</div>
	
<!-- 	Javascript for Rhythm 4 -->	
		<script>
	
		// Create synth
		const synth4 = new Tone.MembraneSynth().toDestination();
		
	 	// Rhythm Patter 4 Implementation

	 	// Part describes sound pattern to be played and includes visual sync
		const part4 = new Tone.Part(function(time, pitch){
		synth4.triggerAttackRelease(pitch, "8n", time); // play an 8th note at the pitch and time passed in
		
		
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementById("rhythmRow4");
					noteElement.classList.remove("invisible");
					noteElement.classList.add("visible");
					setTimeout(() => {
						noteElement.classList.remove("visible");
						noteElement.classList.add("invisible");
					}, 150);
				}, time);

			
		}, [["0", "C2"], ["8n", "C2"], ["4n", "C2"], ["4n.", "C2"]]); // pitch and time of rhythm pattern notes
		
		//set the pattern to loop every half measure
		part4.set({
			"loop" : true,
			"loopEnd" : "2n"
		});
		
		// HTML Sound On/Off Button
	 	let playing4 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm4 button
	  	document.querySelector("#rhythm4").addEventListener("click", function() {  	
			if (!playing4) {
				part4.start(0);
	 			Tone.start();
	 			Tone.Transport.start();
	  			playing4 = true;
	  			Tone.Transport.bpm.value = 80;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part4.stop();
	  			playing4 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 4 Implementation -->
	
	<!-- Rhythm Pattern 5 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 4 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm5" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 5</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div id= "rhythmRow5" class="row p-5 invisible d-flex align-items-center">
			<div class="col-4 mx-auto "><p class="display-5 text-center notation">h</p></div>
			<div class="d-grid gap-2 col-4 ">
			<div id="square2" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center">ta-a</p></div>
	
		</div>
	</div>
	
<!-- 	Javascript for Rhythm 5 -->	
		<script>
	
		// Create synth
		const synth5 = new Tone.MembraneSynth().toDestination();
		
	 	// Rhythm Patter 5 Implementation

	 	// Part describes sound pattern to be played and includes visual sync
		const part5 = new Tone.Part(function(time, pitch){
		synth5.triggerAttackRelease(pitch, "2n", time); // play an 8th note at the pitch and time passed in
		
		
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementById("rhythmRow5");
					noteElement.classList.remove("invisible");
					noteElement.classList.add("visible");
					setTimeout(() => {
						noteElement.classList.remove("visible");
						noteElement.classList.add("invisible");
					}, 800);
				}, time);

			
		}, [["0", "C2"]]); // pitch and time of rhythm pattern notes
		
		//set the pattern to loop every half measure
		part5.set({
			"loop" : true,
			"loopEnd" : "2n"
		});
		
		// HTML Sound On/Off Button
	 	let playing5 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm4 button
	  	document.querySelector("#rhythm5").addEventListener("click", function() {  	
			if (!playing5) {
				part5.start(0);
	 			Tone.start();
	 			Tone.Transport.start();
	  			playing5 = true;
	  			Tone.Transport.bpm.value = 80;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part5.stop();
	  			playing5 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 5 Implementation -->
	
	<!-- Rhythm Pattern 6 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 6 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm6" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 6</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div id= "rhythmRow6" class="row p-5 invisible d-flex align-items-center">
			<div class="col-4 mx-auto "><p class="display-5 text-center notation">j e</p></div>
			<div class="d-grid gap-2 col-4 ">
			<div id="square2" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center">ta-i ti</p></div>
	
		</div>
	</div>
	
<!-- 	Javascript for Rhythm 6 -->	
		<script>
	
		// Create synth
		const synth6 = new Tone.MembraneSynth().toDestination();
		
	 	// Rhythm Patter 6 Implementation

	 	// Part describes sound pattern to be played and includes visual sync
		const part6 = new Tone.Part(function(time, pitch){
		synth6.triggerAttackRelease(pitch, "2n", time); // play an 8th note at the pitch and time passed in
		
		
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementById("rhythmRow6");
					noteElement.classList.remove("invisible");
					noteElement.classList.add("visible");
					setTimeout(() => {
						noteElement.classList.remove("visible");
						noteElement.classList.add("invisible");
					}, 300);
				}, time);

			
		}, [["0", "C2"], ["4n.", "C2"]]); // pitch and time of rhythm pattern notes
		
		//set the pattern to loop every half measure
		part6.set({
			"loop" : true,
			"loopEnd" : "2n"
		});
		
		// HTML Sound On/Off Button
	 	let playing6 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm4 button
	  	document.querySelector("#rhythm6").addEventListener("click", function() {  	
			if (!playing6) {
				part6.start(0);
	 			Tone.start();
	 			Tone.Transport.start();
	  			playing6 = true;
	  			Tone.Transport.bpm.value = 80;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part6.stop();
	  			playing6 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 6 Implementation -->
	
	<!-- Rhythm Pattern 7 Implementation -->

	 <div class="container">	
	 
	 <!-- Rhythm 7 On/Off Button --> 
		<div class="row p-3">
			<div class="col-4"></div>
			<div class="d-grid gap-2 col-4 mx-auto ">
				<button id= "rhythm7" role="switch" aria-checked="false" type="button" class="btn btn-primary"><span>Rhythm 7</span></button>	
			</div>
			<div class="col-4"></div>
	
		</div>
	
		<div id= "rhythmRow7" class="row p-5 invisible d-flex align-items-center">
			<div class="col-4 mx-auto "><p class="display-5 text-center notation">e q e</p></div>
			<div class="d-grid gap-2 col-4 ">
			<div id="square2" class="mx-auto rounded-circle"></div>
			</div>
			<div class="col-4 mx-auto"><p class="display-5 text-center">syn-co-pa</p></div>
	
		</div>
	</div>
	
<!-- 	Javascript for Rhythm 7 -->	
		<script>
	
		// Create synth
		const synth7 = new Tone.MembraneSynth().toDestination();
		
	 	// Rhythm Patter 7 Implementation

	 	// Part describes sound pattern to be played and includes visual sync
		const part7 = new Tone.Part(function(time, pitch){
		synth7.triggerAttackRelease(pitch, "2n", time); // play an 8th note at the pitch and time passed in
		
		
		// Callback to create animation in time with sound
				Tone.Draw.schedule(() => {
					const noteElement = document.getElementById("rhythmRow7");
					noteElement.classList.remove("invisible");
					noteElement.classList.add("visible");
					setTimeout(() => {
						noteElement.classList.remove("visible");
						noteElement.classList.add("invisible");
					}, 200);
				}, time);

			
		}, [["0", "C2"], ["8n", "C2"], ["4n.", "C2"]]); // pitch and time of rhythm pattern notes
		
		//set the pattern to loop every half measure
		part7.set({
			"loop" : true,
			"loopEnd" : "2n"
		});
		
		// HTML Sound On/Off Button
	 	let playing7 = false; // boolean to track whether playing or not. sound not playing when page loads
	  	
	 	// Listener on #rhythm4 button
	  	document.querySelector("#rhythm7").addEventListener("click", function() {  	
			if (!playing7) {
				part7.start(0);
	 			Tone.start();
	 			Tone.Transport.start();
	  			playing7 = true;
	  			Tone.Transport.bpm.value = 80;
	  		
			} else {
	  			Tone.Transport.stop();
	  			part7.stop();
	  			playing7 = false;
			}
		})
	</script>
	
	<!-- End of Rhythm 5 Implementation -->
	





	<!-- Bootstrap JavaScript -->	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
		
</body>
</html>