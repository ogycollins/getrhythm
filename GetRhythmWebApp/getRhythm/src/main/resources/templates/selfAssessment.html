<!DOCTYPE html>
<!-- html tag with attributes for thymeleaf -->
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">

<!-- Icon Library -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<title>Lessons - Composition</title>

<!-- CSS -->
<link rel="stylesheet" type="text/css" media="all"
	href="/getRhythmStyles.css" />



</head>

<body>

	<div th:replace="layoutElements :: authenticatedNavbar"></div>

	<div class="container">

		<!-- Row1 -->
		<div class="row">

			<div th:replace="layoutElements :: greeting"></div>

			<!-- Heading and instructions -->
			<div class="col-6">
				<h1 class="display-4 text-center">Self-Assessment</h1>
			</div>

		</div>

		<!-- Row2 -->

		<div class="row">

			<div class="d-grid col-3 mx-auto "></div>
			<!-- Instructions -->
			<div class="col-6 text-center">
				<h1 class="fs-2 text-center">How did you find that activity?</h1>
			</div>
			<!-- Rhythms Heading -->
			<div class="col-3"></div>
		</div>

		<!-- Row3 -->

		<div class="row">

			<div class="col-3"></div>
			
			<div class="d-grid col-2 rating mx-auto display-3 text-center">
				<span class="rating_result "></span> 
			</div>
		
			<div class="col-4 display-3 ">
				<i class="rating_star fa fa-star"></i> 
				<i class="rating_star fa fa-star"></i> 
				<i class="rating_star fa fa-star"></i> 
				<i class="rating_star fa fa-star"></i> 
				<i class="rating_star fa fa-star"></i>
			</div>

			<div class="col-3"></div>
		</div>

		<div class="row">

			<div class="d-grid col-3 mx-auto text-center "></div>

			<div class="col-6 text-center">
				<form>
					<div class="mb-3">
						<label for="comment" class="form-label">Comment</label> 
						<input type="email" class="form-control" id="comment" aria-describedby="assessmentHelp">
						<div id="assessmentHelp" class="form-text">How did you find that activity?</div>
					</div>
			
					<div class="mb-3">
						<label for=activityType class="form-label">Activity Type</label>
						<input type="text" class="form-control" id="activityType">
					</div>
					
					<button type="submit" class="btn btn-primary">Submit</button>
				</form>
			</div>

			<div class="col-3"></div>
		</div>




	<!-- Row4 -->
		<div class="row">
			<div class="col-4">
				<div th:replace="layoutElements :: signoutButton"></div>
			</div>

			<div class="d-grid col-4 mx-auto"></div>

			<div class="d-grid col-2 mx-auto"></div>
			<div class="d-grid col-2 mx-auto">

				<a id="continue" href="/dictation" role="button"
					aria-checked="false" class="btn btn-primary text-center "> <span>Continue</span>
				</a>
			</div>
		</div>
	</div>

	<p>
		Debugging: <span id="debug"></span>
	</p>

	<!-- Javascript -->
	<script th:inline="javascript">
	
	   const ratingStars = [...document.getElementsByClassName("rating_star")]; // create an array of all rating star items
	   const ratingResult = document.querySelector(".rating_result"); // select the span where the numerical rating will be updated
	   
	   printRatingResult(ratingResult); // print the current ratint (0 by default)
	   
	   // function to update rating on mouse click - takes array of stars and current numerical rating
	   function executeRating(stars, result) {
		   const starsLength = stars.length; // find length of array of stars
		   var i; // declare counter variable
		  
		   // map function used to call function on each element of array
		   stars.map((star) => {
			  // function to be performed when a star element is clicked
		      star.onclick = () => {
		    	  
		         i = stars.indexOf(star); // set counter to index of current star
		         
				// if current star is not checked, check all stars up to its index and update numerical rating. If star already checked, remove check.
		         if (!star.classList.contains("checked")) {
		            printRatingResult(result, i + 1);
		            for (i; i >= 0; --i) stars[i].classList.add("checked");
		         } else {
		            printRatingResult(result, i);
		            for (i; i < starsLength; ++i) stars[i].classList.remove("checked");
		         }
		      };
		   });
		}

		function printRatingResult(result, num = 0) {
		   result.textContent = `${num}/5`;
		}

		executeRating(ratingStars, ratingResult);

		// update debugging output
		document.getElementById("debug").innerHTML = ratingStars.length;	
	
	
	</script>
	<!-- Bootstrap JavaScript -->
		<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous">
</body>
</html>